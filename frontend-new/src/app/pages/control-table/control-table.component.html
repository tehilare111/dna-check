<nb-card>
  <nb-card-body>
      <div class="row">
        <div class="col-md-12" style="margin-bottom:3px;">
          <button nbButton status="success" [disabled]="(pickedUpEvent.route!=undefined && this.routeDrafts?false:true)" [routerLink]="[pickedUpEvent.route]" hero style="margin: 3px;">
            <i class="ion-plus-round" [nbPopover]="icon" ></i>
          </button>
        <button  *ngFor="let button of eventsToPickUp |keyvalue"  status="info"  nbButton (click)="loadTable(pickedUpEvent=button.value)" style="margin: 3px;" hero>{{button.value.name}}</button>
        <input nbInput #search id="search" status="info" class="search-input" placeholder="חיפוש בטבלה:" (input)="onSearch(search.value)" style="margin: 3px;" >
        <button nbButton  status="info" title='טיוטות' id='טיוטות' (click)="draftsColumns()" style="margin:3px; " hero>
          טיוטות
        </button>
        <img class='img' src="assets/images/excel_Offical.png" (click)="exportToXL(pickedUpEvent)" style=" margin-right: 3px; height:42px;width: 40px; align-items: center;">
      </div>
      </div>
    
    <table  mat-table [dataSource]="dataSourceFilter" matSort  (matSortChange)="sortData($event)"  class="my-table mat-elevation-z4">
      <ng-container *ngFor="let column of displayedColumnsTitle; let i =index" matColumnDef="{{displayedColumns[i]}}"
      [sticky]="i==0">
              <th class="header" mat-header-cell id="{{column}}" #idHeader *matHeaderCellDef mat-sort-header> {{column }} <mat-icon (click)="this.jsonArrayItems[i].flagDisplay=!this.jsonArrayItems[i].flagDisplay;getArrayItems(idHeader.id,i)" [matMenuTriggerFor]="menu" >menu</mat-icon>
                <mat-menu overlapTrigger="false" class="sizeMenu" #menu="matMenu" xPosition='before' yPosition='below'>
                  <div class="sizeMenu" (click)="$event.stopPropagation();">
                    <div class="example-block">
                      <div class="example-block__item">
                        <div>
                          <angular2-multiselect id="hiddens" class="custom-class-example" [data]="this.jsonArrayItems[i].array" [(ngModel)]="this.jsonArrayItems[i].value" 
                          [settings]="dropdownSettings"
                          (onSelect)="createArraySeclect($event,i);applyFilter($event,i)" 
                          (onDeSelect)="removeArraySelect($event,i);applyFilter($event,i)"
                          (onSelectAll)="createArrayAllSelect($event,i);applyFilter($event,i)"
                          (onDeSelectAll)="removeArrayAllSelect(i);applyFilter($event,i)"
                          #dropdownRef 
                          ></angular2-multiselect>
                        
                      </div>
                      </div>
                  </div>
                   </div>
                </mat-menu>
        </th>
        <td class="example-element-row td" mat-cell *matCellDef="let element"> {{element[displayedColumns[i]]}} 
        </td>
      </ng-container>
      <tr mat-header-row *matHeaderRowDef="displayedColumns;sticky: true;" ></tr>
      <tr mat-row (click)='formClicked(myRowData)' *matRowDef="let myRowData; columns: displayedColumns"></tr>
    </table>
  </nb-card-body>
</nb-card>